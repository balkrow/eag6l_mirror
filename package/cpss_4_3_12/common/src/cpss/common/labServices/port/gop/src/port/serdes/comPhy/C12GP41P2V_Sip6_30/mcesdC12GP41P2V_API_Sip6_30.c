/*******************************************************************************
Copyright (C) 2018, Marvell International Ltd. and its affiliates
If you received this File from Marvell and you have entered into a commercial
license agreement (a "Commercial License") with Marvell, the File is licensed
to you under the terms of the applicable Commercial License.
*******************************************************************************/

/********************************************************************
This file contains functions prototypes and global defines/data for
higher-level functions to configure Marvell CE SERDES IP:
COMPHY_12G_PIPE4_1P2V
********************************************************************/
#include "../mcesdTop.h"
#include "../mcesdApiTypes.h"
#include "../mcesdUtils.h"
#include "../C12GP41P2V/mcesdC12GP41P2V_Defs.h"
#include "mcesdC12GP41P2V_API_Sip6_30.h"
#include "mcesdC12GP41P2V_RegRW_Sip6_30.h"
#include "mcesdC12GP41P2V_HwCntl_Sip6_30.h"
#if !defined (IRONMAN_DEV_SUPPORT)
#include <stdio.h>
#endif
#include <string.h>
#include <math.h>

#ifdef C12GP41P2V_SIP6_30

CPSS_ADDITION_START
#include <cpss/common/labServices/port/gop/port/serdes/comPhy/mvHwsComphySerdesSip6_30.h>
CPSS_ADDITION_END

/* Forward internal function prototypes used only in this module */
static MCESD_STATUS INT_C12GP41P2V_1GSpeedSequence(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_2P578125GSpeedSequence(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_3GSpeedSequence(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_5GSpeedSequence(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_10GSpeedSequence(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_ProgramSequence11P5625G(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_ProgramSequence10G(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_ProgramSequence2P578125G(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_ProgramSequence12P375G(IN MCESD_DEV_PTR devPtr);
static MCESD_STATUS INT_C12GP41P2V_EOMSetPhase(IN MCESD_DEV_PTR devPtr, IN MCESD_32 softwarePhase, IN MCESD_32 targetPhase, IN MCESD_16 phaseOffset);
static MCESD_STATUS INT_C12GP41P2V_CalculateBER(IN MCESD_U32 bitErrorCount, IN MCESD_U64 bitCount, OUT MCESD_U32* nanoBER);
static MCESD_STATUS INT_C12GP41P2V_SpeedGbpsToMbps(IN E_C12GP41P2V_SERDES_SPEED speed, OUT MCESD_U32* mbps);

MCESD_STATUS API_C12GP41P2V_GetPLLLock
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *locked
)
{
    MCESD_U16 pllData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LOCK, pllData);
    *locked = (pllData == 1) ? MCESD_TRUE : MCESD_FALSE;
    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxRxReady
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *txReady,
    OUT MCESD_BOOL *rxReady
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PLL_READY_TX, &pinValue));
    *txReady = (MCESD_BOOL)pinValue;
    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PLL_READY_RX, &pinValue));
    *rxReady = (MCESD_BOOL)pinValue;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetCDRLock
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U16 data;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CDR_LOCK, data);
    *state = (data == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_RxInit
(
    IN MCESD_DEV_PTR devPtr
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_RX_INIT0, 1));
    MCESD_ATTEMPT(API_C12GP41P2V_PollPin(devPtr, C12GP41P2V_PIN_RX_INIT_DONE0, 1, 5000));
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_RX_INIT0, 0));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTxEqParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TXEQ_PARAM param,
    IN MCESD_U32 paramValue
)
{
    switch (param)
    {
    case C12GP41P2V_TXEQ_EM_PRE_CTRL:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_PRE_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_PRE, paramValue);
        break;
    case C12GP41P2V_TXEQ_EM_PEAK_CTRL:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_PEAK_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_PEAK, paramValue);
        break;
    case C12GP41P2V_TXEQ_EM_POST_CTRL:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_POST_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_POST, paramValue);
        break;
    default:
        return MCESD_FAIL;  /* Unsupported parameter */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxEqParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TXEQ_PARAM param,
    OUT MCESD_U32 *paramValue
)
{
    MCESD_U16 data;

    switch (param)
    {
    case C12GP41P2V_TXEQ_EM_PRE_CTRL:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TX_EM_PRE, data);
        break;
    case C12GP41P2V_TXEQ_EM_PEAK_CTRL:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TX_EM_PEAK, data);
        break;
    case C12GP41P2V_TXEQ_EM_POST_CTRL:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TX_EM_POST, data);
        break;
    default:
        return MCESD_FAIL;  /* Unsupported parameter */
    }

    *paramValue = (MCESD_U32)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetCTLEParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_CTLE_PARAM param,
    IN MCESD_U32 paramValue
)
{
    switch (param)
    {
    case C12GP41P2V_CTLE_RES_SEL:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SEL, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_CTLE_RES_SHIFT:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_CTLE_CAP_SEL:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CAP_SEL, (MCESD_U16)paramValue);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 1);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetCTLEParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_CTLE_PARAM param,
    OUT MCESD_U32 *paramValue
)
{
    MCESD_U16 data;

    switch (param)
    {
    case C12GP41P2V_CTLE_RES_SEL:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPTEDFFE_RES, data);
        break;
    case C12GP41P2V_CTLE_RES_SHIFT:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, data);
        break;
    case C12GP41P2V_CTLE_CAP_SEL:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPTEDFFE_CAP, data);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    *paramValue = (MCESD_32)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetDfeEnable
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_DFE_EN0, state));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetDfeEnable
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_DFE_EN0, &pinValue));
    *state = (pinValue == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetFreezeDfeUpdates
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_DFE_UPDATE_DIS0, state));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetFreezeDfeUpdates
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_DFE_UPDATE_DIS0, &pinValue));
    *state = (pinValue == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetDfeTap
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_DFE_TAP tap,
    OUT MCESD_32 *tapValue
)
{
CPSS_ADDITION_START
    MCESD_U16 data;

    switch (tap)
    {
    case C12GP41P2V_DFE_DC_S:
        {
            MCESD_FIELD dcS = F_C12GP41P2VR2P0_DFE_DC_S;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &dcS, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, dcS.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F0_S:
        {
            MCESD_FIELD f0S = F_C12GP41P2VR2P0_DFE_F0_S;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f0S, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f0S.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F1_S:
        {
            MCESD_FIELD f1S = F_C12GP41P2VR2P0_DFE_F1_S;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f1S, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f1S.totalBits);
        }
        break;
    case C12GP41P2V_DFE_DC_D:
        {
            MCESD_FIELD dcD = F_C12GP41P2VR2P0_DFE_DC_D;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &dcD, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, dcD.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F0_D:
        {
            MCESD_FIELD f0D = F_C12GP41P2VR2P0_DFE_F0_D;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f0D, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f0D.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F1_D:
        {
            MCESD_FIELD f1D = F_C12GP41P2VR2P0_DFE_F1_D;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f1D, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f1D.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F2:
    {
        MCESD_FIELD f2 = F_C12GP41P2VR2P0_DFE_F2;

        MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f2, &data));
        *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f2.totalBits);
    }
        break;
    case C12GP41P2V_DFE_F3:
        {
            MCESD_FIELD f3 = F_C12GP41P2VR2P0_DFE_F3;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f3, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f3.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F4:
        {
            MCESD_FIELD f4 = F_C12GP41P2VR2P0_DFE_F4;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f4, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f4.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F5:
        {
            MCESD_FIELD f5 = F_C12GP41P2VR2P0_DFE_F5;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f5, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f5.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F6:
        {
            MCESD_FIELD f6 = F_C12GP41P2VR2P0_DFE_F6;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f6, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f6.totalBits);
        }
        break;
    case C12GP41P2V_DFE_F7:
        {
            MCESD_FIELD f7 = F_C12GP41P2VR2P0_DFE_F7;

            MCESD_ATTEMPT(API_C12GP41P2V_ReadField(devPtr, &f7, &data));
            *tapValue = ConvertSignedMagnitudeToI32((MCESD_U32)data, f7.totalBits);
        }
        break;
    default:
        return MCESD_FAIL; /* Unsupported DFE tap */
    }

    return MCESD_OK;
CPSS_ADDITION_END
}

MCESD_STATUS API_C12GP41P2V_SetPowerIvRef
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PU_IVREF, state));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetPowerIvRef
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PU_IVREF, &pinValue));
    *state = (pinValue == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetPowerTx
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PU_TX0, state));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetPowerTx
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 data;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PU_TX0, &data));
    *state = (data == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}


MCESD_STATUS API_C12GP41P2V_SetPowerRx
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PU_RX0, state));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetPowerRx
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 data;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PU_RX0, &data));
    *state = (data == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTxOutputEnable
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_TX_IDLE0, state ? 0 : 1));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxOutputEnable
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_TX_IDLE0, &pinValue));
    *state = (pinValue == 0) ? MCESD_TRUE : MCESD_FALSE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetPowerPLL
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    E_C12GP41P2V_REFFREQ freq;
    E_C12GP41P2V_REFCLK_SEL clkSel;
    E_C12GP41P2V_SERDES_SPEED speed;

    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PU_PLL0, state));

    while (MCESD_TRUE == state)
    {
        /* Speed is C12GP41P2V_SERDES_10P3125G */
        MCESD_ATTEMPT(API_C12GP41P2V_GetTxRxBitRate(devPtr, &speed));
        if (C12GP41P2V_SERDES_10P3125G != speed)
            break;

        MCESD_ATTEMPT(API_C12GP41P2V_GetRefFreq(devPtr, &freq, &clkSel));
        if ((C12GP41P2V_REFFREQ_25MHZ != freq) && (C12GP41P2V_REFFREQ_156P25MHZ != freq))
            break;

        if (C12GP41P2V_REFFREQ_25MHZ == freq)
        {
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
            break;
        }

        /* Reference Frequency is C12GP41P2V_REFFREQ_156P25MHZ */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0x7);
        break;
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetPowerPLL
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *state
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PU_PLL0, &pinValue));
    *state = (pinValue == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetPhyMode
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_PHYMODE mode
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_MODE, mode));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetPhyMode
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_PHYMODE *mode
)
{
    MCESD_U32 pinValue;
    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PHY_MODE, &pinValue));
    *mode = (E_C12GP41P2V_PHYMODE)pinValue;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetRefFreq
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_REFFREQ freq,
    IN E_C12GP41P2V_REFCLK_SEL clkSel
)
{
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_REF_FREF_SEL, freq));
    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_REFCLK_SEL, clkSel));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetRefFreq
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_REFFREQ *freq,
    OUT E_C12GP41P2V_REFCLK_SEL *clkSel
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_REF_FREF_SEL, &pinValue));
    *freq = (E_C12GP41P2V_REFFREQ)pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_REFCLK_SEL, &pinValue));
    *clkSel = (E_C12GP41P2V_REFCLK_SEL)pinValue;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTxRxBitRate
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_SERDES_SPEED speed
)
{
    /* Additional Specific Speed Sequences */
    switch (speed)
    {
    case C12GP41P2V_SERDES_1P25G:
        /* 1.25G */
        MCESD_ATTEMPT(INT_C12GP41P2V_1GSpeedSequence(devPtr));
        break;
    case C12GP41P2V_SERDES_2P578125G:
        /* 2.578125G*/
        MCESD_ATTEMPT(INT_C12GP41P2V_2P578125GSpeedSequence(devPtr));
        break;
    case C12GP41P2V_SERDES_3P125G:
        /* 3.125G */
        MCESD_ATTEMPT(INT_C12GP41P2V_3GSpeedSequence(devPtr));
        break;
    case C12GP41P2V_SERDES_5P15625G:
    case C12GP41P2V_SERDES_5G:
        /* 5.15625G, 5G */
        MCESD_ATTEMPT(INT_C12GP41P2V_5GSpeedSequence(devPtr));
        break;
    case C12GP41P2V_SERDES_10G:
    case C12GP41P2V_SERDES_10P3125G:
    case C12GP41P2V_SERDES_11P5625G:
CPSS_ADDITION_START
    case C12GP41P2V_SERDES_12P375G:
CPSS_ADDITION_END

        /* 10G, 10.3125G, 11.5625G, 12.375 */
        MCESD_ATTEMPT(INT_C12GP41P2V_10GSpeedSequence(devPtr));
        break;
    default:
        /* No Specific Speed Sequence */
        break;
    }

    switch (speed)
    {
    case C12GP41P2V_SERDES_11P5625G:
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_TX0, C12GP41P2V_SERDES_10P3125G));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, C12GP41P2V_SERDES_10P3125G));
        MCESD_ATTEMPT(INT_C12GP41P2V_ProgramSequence11P5625G(devPtr));
        break;
    case C12GP41P2V_SERDES_10G:
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_TX0, C12GP41P2V_SERDES_10P3125G));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, C12GP41P2V_SERDES_10P3125G));
        MCESD_ATTEMPT(INT_C12GP41P2V_ProgramSequence10G(devPtr));
        break;
    case C12GP41P2V_SERDES_2P578125G:
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_TX0, C12GP41P2V_SERDES_2P5G));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, C12GP41P2V_SERDES_2P5G));
        MCESD_ATTEMPT(INT_C12GP41P2V_ProgramSequence2P578125G(devPtr));
        break;
    case C12GP41P2V_SERDES_12P375G:
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_TX0, C12GP41P2V_SERDES_12P5G));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, C12GP41P2V_SERDES_12P5G));
        MCESD_ATTEMPT(INT_C12GP41P2V_ProgramSequence12P375G(devPtr));
        break;
    default:
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_TX0, speed));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, speed));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_GEN_MAX, 0x3);
    }

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_1GSpeedSequence
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x7);
    MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_FALSE));
CPSS_ADDITION_START
    /*MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPF, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPI, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SEL, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_CAP_SEL, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SHIFT, 0x6));*/
CPSS_ADDITION_END
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateEnable(devPtr, C12GP41P2V_SR_DISABLE));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL1, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL0, 0x0));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_VTH_TXIMPCAL, 0x1);
CPSS_ADDITION_START
    /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, 0x2);*/
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REALPHASEADAPT, 0x0);

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_2P578125GSpeedSequence
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x4);
    MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_FALSE));
CPSS_ADDITION_START
    /*MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SEL, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_CAP_SEL, 0x5));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SHIFT, 0x9));*/
CPSS_ADDITION_END
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateEnable(devPtr, C12GP41P2V_SR_DISABLE));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL1, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL0, 0x0));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_VTH_TXIMPCAL, 0x2);
CPSS_ADDITION_START
    /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, 0x2);*/
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REALPHASEADAPT, 0x0);

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_3GSpeedSequence
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x4);
    MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_FALSE));
CPSS_ADDITION_START
    /*MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPF, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPI, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SEL, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_CAP_SEL, 0x1));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCTLEParam(devPtr, C12GP41P2V_CTLE_RES_SHIFT, 0x9));*/
CPSS_ADDITION_END
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateEnable(devPtr, C12GP41P2V_SR_DISABLE));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL1, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL0, 0x0));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_VTH_TXIMPCAL, 0x2);
CPSS_ADDITION_START
    /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, 0x2);*/
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REALPHASEADAPT, 0x0);

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_5GSpeedSequence
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x4);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_TRAIN, 0x1);
    MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_TRUE));
CPSS_ADDITION_START
    /*MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPF, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPI, 0x4));*/
CPSS_ADDITION_END
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateEnable(devPtr, C12GP41P2V_SR_DISABLE));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL1, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL0, 0x0));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_VTH_TXIMPCAL, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_RES_HIGH, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_RES_LOW, 0x2);
CPSS_ADDITION_START
    /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, 0x2);*/
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REALPHASEADAPT, 0x0);

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_10GSpeedSequence
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x5);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_TRAIN, 0x1);
    MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_TRUE));
CPSS_ADDITION_START
    /*MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFF, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUFI, 0x3));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPF, 0x4));
    MCESD_ATTEMPT(API_C12GP41P2V_SetCDRParam(devPtr, C12GP41P2V_CDR_SELMUPI, 0x4));*/
CPSS_ADDITION_END
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateEnable(devPtr, C12GP41P2V_SR_DISABLE));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL1, 0x0));
    MCESD_ATTEMPT(API_C12GP41P2V_SetSlewRateParam(devPtr, C12GP41P2V_SR_CTRL0, 0x0));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_VTH_TXIMPCAL, 0x4);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_RES_HIGH, 0x5);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_RES_LOW, 0x2);
CPSS_ADDITION_START
    /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RES_SHIFT, 0x2);*/
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REALPHASEADAPT, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_MIN_BOOST_MODE, 0x0);

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDRV_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBCK_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_FBCK, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_UPDATE_EN, 0xFF);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_UPDATE_DC, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DC_OS_NORMAL, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DC_OS_TRAIN, 0x1);
CPSS_ADDITION_START
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_MAX_DFE_0, 0x3);
CPSS_ADDITION_END
    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_ProgramSequence11P5625G
(
    IN MCESD_DEV_PTR devPtr
)
{
    E_C12GP41P2V_REFFREQ freq;
    E_C12GP41P2V_REFCLK_SEL clkSel;

    /* TX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_CLK, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_DATA, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_VDDCALEN, 0x1);

    /* RX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DTLCLK_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DTLCLK_D, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPI_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPI, 0x4);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPR_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPR, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_EOM_INTPR_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RXEOM_INTPR, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CLK, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DATA, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CKPW_CNT_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CKPW_CNT, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_PU_A90_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_PU_A90, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_VDDCALEN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DCC_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DCCCA_EN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_CTRL, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV1P5, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV, 0x73);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FIX_DIV, 0x0);

    /* PLL Programming */
    MCESD_ATTEMPT(API_C12GP41P2V_GetRefFreq(devPtr, &freq, &clkSel));
    if (C12GP41P2V_REFFREQ_25MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FREF_SEL_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REF_FREF_SEL, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0xE7);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xFB);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x17);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x7CB);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x7CB);
    }
    else if (C12GP41P2V_REFFREQ_156P25MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FREF_SEL_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REF_FREF_SEL, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0x25);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xB);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xFD);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x17);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x0);
    }
    else if (C12GP41P2V_REFFREQ_125MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHY_MODE, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FREF_SEL_FMREG, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_REF_FREF_SEL, 0xA);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0x2E);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xD);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xFB);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x17);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x6F6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x6F6);
    }
    else
    {
        return MCESD_FAIL; /* No sequence for this reference clock */
    }

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_ProgramSequence10G
(
    IN MCESD_DEV_PTR devPtr
)
{
    E_C12GP41P2V_REFFREQ freq;
    E_C12GP41P2V_REFCLK_SEL clkSel;

    /* TX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDRV_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBCK_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_FBCK, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x5);

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_CLK, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_DATA, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_VDDCALEN, 0x1);

    /* RX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DTLCLK_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DTLCLK_D, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPI_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPI, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPR_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPR, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_EOM_INTPR_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RXEOM_INTPR, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CLK, 0x5);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DATA, 0x6);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CKPW_CNT_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CKPW_CNT, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_PU_A90_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_PU_A90, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
CPSS_ADDITION_START
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x6);
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
CPSS_ADDITION_START
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x6);
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
CPSS_ADDITION_START
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x6);
CPSS_ADDITION_END
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_VDDCALEN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DCC_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DCCCA_EN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_CTRL, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV1P5, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV, 0x64);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FIX_DIV, 0x1);

    /* PLL Programming */
    MCESD_ATTEMPT(API_C12GP41P2V_GetRefFreq(devPtr, &freq, &clkSel));
    if (C12GP41P2V_REFFREQ_25MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0xC8);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xFA);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x14);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x3);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x5);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x0);
    }
    else if (C12GP41P2V_REFFREQ_125MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0x28);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xFA);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x14);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x3);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x5);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x0);
    }
    else
    {
        return MCESD_FAIL; /* No sequence for this reference clock */
    }

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_ProgramSequence2P578125G
(
    IN MCESD_DEV_PTR devPtr
)
{
    E_C12GP41P2V_REFFREQ freq;
    E_C12GP41P2V_REFCLK_SEL clkSel;

    /* TX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPEED_DIV, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_CLK, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_DATA, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_VDDCALEN, 0x0);

    /* RX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPEED_DIV, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DTLCLK_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DTLCLK_D, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPI_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPI, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPR_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPR, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_EOM_INTPR_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RXEOM_INTPR, 0x3);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CLK, 0x5);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DATA, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CKPW_CNT_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CKPW_CNT, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_PU_A90_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_PU_A90, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_VDDCALEN, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DCC_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DCCCA_EN, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_CTRL, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV1P5, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV, 0x89);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FIX_DIV, 0x0);

    /* PLL Programming */
    MCESD_ATTEMPT(API_C12GP41P2V_GetRefFreq(devPtr, &freq, &clkSel));
    if (C12GP41P2V_REFFREQ_25MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0xCE);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xF6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x15);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x3);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x5);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x7C4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x7C4);
    }
    else if (C12GP41P2V_REFFREQ_125MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0xA5);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xB);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xF6);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x15);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x3);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x5);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x0);
    }
    else
    {
        return MCESD_FAIL; /* No sequence for this reference clock */
    }

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_ProgramSequence12P375G
(
    IN MCESD_DEV_PTR devPtr
)
{
    E_C12GP41P2V_REFFREQ freq;
    E_C12GP41P2V_REFCLK_SEL clkSel;

    /* TX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDRV_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBCK_SEL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_FBCK, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VREF_TXDRV, 0x5);

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_CLK, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_DATA, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_TX_VDDCALEN, 0x1);

    /* RX Programming */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPDIV_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SPEED_DIV, 0x0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DTLCLK_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DTLCLK_D, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPI_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPI, 0x4);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_INTPR_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_INTPR, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_EOM_INTPR_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RXEOM_INTPR, 0x2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CLK_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CLK, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DATA_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DATA, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CKPW_CNT_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CKPW_CNT, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_PU_A90_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_PU_A90, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_1_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_1, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_2_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_2, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_CTLE_3_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_CTLE_3, 0x7);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_VDD_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_VDDCALEN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_DCC_CAL_F, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_RX_DCCCA_EN, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FORCE, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_CTRL, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV1P5, 0x1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV, 0xA5);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FIX_DIV, 0x1);

    /* PLL Programming */
    MCESD_ATTEMPT(API_C12GP41P2V_GetRefFreq(devPtr, &freq, &clkSel));
    if (C12GP41P2V_REFFREQ_25MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0xF7);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xC);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xF8);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x19);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x7);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x79D);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x79D);
    }
    else if (C12GP41P2V_REFFREQ_125MHZ == freq)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REFDIV, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_FBDIV, 0x63);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_BW_SEL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_BW_SEL, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_LPF_C2_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_LPF_C2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_ICP_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_ICP, 0xD);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_SPEED, 0xF8);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FBDIV_CAL, 0x19);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPI_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPI, 0x4);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXINTPR_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXINTPR, 0x2);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXDTXCLK_DIV_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_TXDTXCLKDIV, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PLL_REG_FORCE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_R0_REG_SPD_TRK, 0x7);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_TXFOFFS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS_F, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_INIT_RXFOFFS, 0x0);
    }
    else
    {
        return MCESD_FAIL; /* No sequence for this reference clock */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxRxBitRate
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_SERDES_SPEED *speed
)
{
    MCESD_U16 ctrlData, div1p5Data, divData, fixDivData;
    MCESD_U32 pinValue;

    /* Check ANA_RX_CLK_25M values to see if speed is a programmed sequence */
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_CTRL, ctrlData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV1P5, div1p5Data);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_DIV, divData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_25M_FIX_DIV, fixDivData);

    if ((0x2 == ctrlData) && (0x0 == div1p5Data) && (0x73 == divData) && (0x0 == fixDivData))
    {
        *speed = C12GP41P2V_SERDES_11P5625G;
    }
    else if ((0x2 == ctrlData) && (0x0 == div1p5Data) && (0x64 == divData) && (0x1 == fixDivData))
    {
        *speed = C12GP41P2V_SERDES_10G;
    }
    else if ((0x1 == ctrlData) && (0x1 == div1p5Data) && (0x89 == divData) && (0x0 == fixDivData))
    {
        *speed = C12GP41P2V_SERDES_2P578125G;
    }
    else if ((0x1 == ctrlData) && (0x1 == div1p5Data) && (0xA5 == divData) && (0x1 == fixDivData))
    {
        *speed = C12GP41P2V_SERDES_12P375G;
    }
    else
    {
        MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_PHY_GEN_RX0, &pinValue));
        *speed = (E_C12GP41P2V_SERDES_SPEED)pinValue;
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetDataBusWidth
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_DATABUS_WIDTH width
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SEL_BITS, width);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetDataBusWidth
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_DATABUS_WIDTH *width
)
{
    MCESD_U16 data;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SEL_BITS, data);
    *width = (E_C12GP41P2V_DATABUS_WIDTH)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetAlign90
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_U16 align90
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ALIGN90_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ALIGN90_EXT, align90);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetAlign90
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_U16 *align90
)
{
    MCESD_U16 data;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ALIGN90_REF, data);
    *align90 = data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTrainingTimeout
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type,
    IN S_C12GP41P2V_TRAINING_TIMEOUT *training
)
{
    if (training == NULL)
        return MCESD_FAIL;

    if (type == C12GP41P2V_TRAINING_TRX)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAIN_T_EN, training->enable);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAINTIMER, training->timeout);
    }
    else
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAIN_T_EN, training->enable);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_TRAIN_TIMER, training->timeout);
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTrainingTimeout
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type,
    OUT S_C12GP41P2V_TRAINING_TIMEOUT *training
)
{
    MCESD_U16 enableData, timeoutData;

    if (training == NULL)
        return MCESD_FAIL;

    if (type == C12GP41P2V_TRAINING_TRX)
    {
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAIN_T_EN, enableData);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAINTIMER, timeoutData);
    }
    else
    {
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TRX_TRAIN_T_EN, enableData);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_TRAIN_TIMER, timeoutData);
    }

    training->enable = (MCESD_BOOL)enableData;
    training->timeout = timeoutData;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_ExecuteTraining
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type
)
{
    MCESD_U32 failed;

    MCESD_ATTEMPT(API_C12GP41P2V_StartTraining(devPtr, type));

    if (type == C12GP41P2V_TRAINING_TRX)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_PollPin(devPtr, C12GP41P2V_PIN_TX_TRAIN_COMPLETE0, 1, 5000));
        MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_FAILED0, &failed));
    }
    else
    {
        MCESD_ATTEMPT(API_C12GP41P2V_PollPin(devPtr, C12GP41P2V_PIN_RX_TRAIN_COMPLETE0, 1, 5000));
        MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_FAILED0, &failed));
    }

    MCESD_ATTEMPT(API_C12GP41P2V_StopTraining(devPtr, type));

    return (failed == 0) ? MCESD_OK : MCESD_FAIL;
}

MCESD_STATUS API_C12GP41P2V_StartTraining
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type
)
{
    S_C12GP41P2V_TRAINING_TIMEOUT trainingTimeout;
    E_C12GP41P2V_SERDES_SPEED speed;
    trainingTimeout.enable = MCESD_TRUE;
    trainingTimeout.timeout = 0x3FF;

    MCESD_ATTEMPT(API_C12GP41P2V_SetTrainingTimeout(devPtr, type, &trainingTimeout));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0);

    MCESD_ATTEMPT(API_C12GP41P2V_GetTxRxBitRate(devPtr, &speed));
CPSS_ADDITION_START
    if ( (speed == C12GP41P2V_SERDES_10P3125G) || (speed == C12GP41P2V_SERDES_10G)|| (speed == C12GP41P2V_SERDES_12P375G) )
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_UPDATE_EN, 0xFF);
    }
    else
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_UPDATE_EN, 0x3F);
    }
CPSS_ADDITION_END
    if (type == C12GP41P2V_TRAINING_TRX)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_LINK_TRAINMODE, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRAIN_CHK_INIT, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FFE_SETTING_F, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DET_BYPASS, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ETHERNET_MODE, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRAIN_PAT_SEL, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PAT_TWO_ZERO, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PAT_TOGGLE, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRAIN_PAT_NUM, 0x88);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXPRESET_INDEX, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_START_NO_WAIT, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_START_SQ_EN, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FRAME_DETECTED, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_START_LOCK_EN, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_WAIT_TIME_EN, 0x1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_LOCK_LOST_EN, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_AMP_DEFAULT1, 0x10);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EMPH1_DEFAULT1, 0x3);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EMPH0_DEFAULT1, 0x3);
CPSS_ADDITION_START
        /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_AMP_DEFAULT2, 0x16);*/
CPSS_ADDITION_END
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EMPH1_DEFAULT2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EMPH0_DEFAULT2, 0x0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TRAIN_PAT_MODE, 0x0);
CPSS_ADDITION_START
        /*C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_LOCAL_INDEX, 0x1);*/
CPSS_ADDITION_END

        MCESD_ATTEMPT(API_C12GP41P2V_SetFreezeDfeUpdates(devPtr, MCESD_FALSE));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_DFE_PAT_DIS0, 1));
        MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_TRUE));

        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_ENABLE0, 0));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_ENABLE0, 1));
    }
    else
    {
        MCESD_ATTEMPT(API_C12GP41P2V_SetFreezeDfeUpdates(devPtr, MCESD_FALSE));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_DFE_PAT_DIS0, 1));
        MCESD_ATTEMPT(API_C12GP41P2V_SetDfeEnable(devPtr, MCESD_TRUE));

        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_ENABLE0, 0));
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_ENABLE0, 1));
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_CheckTraining
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type,
    OUT MCESD_BOOL *completed,
    OUT MCESD_BOOL *failed
)
{
    MCESD_U32 completeData, failedData = 0;

    if (type == C12GP41P2V_TRAINING_TRX)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_COMPLETE0, &completeData));
        if (1 == completeData)
        {
            MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_FAILED0, &failedData));
            MCESD_ATTEMPT(API_C12GP41P2V_StopTraining(devPtr, type));
        }
    }
    else
    {
        MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_COMPLETE0, &completeData));
        if (1 == completeData)
        {
            MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_FAILED0, &failedData));
            MCESD_ATTEMPT(API_C12GP41P2V_StopTraining(devPtr, type));
        }
    }

    *completed = (completeData == 0) ? MCESD_FALSE : MCESD_TRUE;
    *failed = (failedData == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_StopTraining
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_TRAINING type
)
{
    if (type == C12GP41P2V_TRAINING_TRX)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_TX_TRAIN_ENABLE0, 0));
    }
    else
    {
        MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_RX_TRAIN_ENABLE0, 0));
    }

    MCESD_ATTEMPT(API_C12GP41P2V_HwSetPinCfg(devPtr, C12GP41P2V_PIN_DFE_PAT_DIS0, 0));
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 1));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetCDRParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_CDR_PARAM param,
    OUT MCESD_U32 *paramValue
)
{
    MCESD_U16 data;

    switch (param)
    {
    case C12GP41P2V_CDR_SELMUFI:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUFI, data);
        break;
    case C12GP41P2V_CDR_SELMUFF:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUFF, data);
        break;
    case C12GP41P2V_CDR_SELMUPI:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUPI, data);
        break;
    case C12GP41P2V_CDR_SELMUPF:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUPF, data);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    *paramValue = (MCESD_U32)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetCDRParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_CDR_PARAM param,
    IN MCESD_U32 paramValue
)
{
    switch (param)
    {
    case C12GP41P2V_CDR_SELMUFI:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUFI, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_CDR_SELMUFF:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUFF, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_CDR_SELMUPI:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUPI, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_CDR_SELMUPF:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_SELMUPF, (MCESD_U16)paramValue);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetSlewRateEnable
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_SLEWRATE_EN setting
)
{
    switch (setting)
    {
    case C12GP41P2V_SR_DISABLE:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWRATE_EN, 0);
        break;
    case C12GP41P2V_SR_ENABLE:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWRATE_EN, 3);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetSlewRateEnable
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_SLEWRATE_EN *setting
)
{
    MCESD_U16 data;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWRATE_EN, data);
    *setting = (E_C12GP41P2V_SLEWRATE_EN)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetSlewRateParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_SLEWRATE_PARAM param,
    IN MCESD_U32 paramValue
)
{
    switch (param)
    {
    case C12GP41P2V_SR_CTRL0:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWCTRL0, (MCESD_U16)paramValue);
        break;
    case C12GP41P2V_SR_CTRL1:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWCTRL1, (MCESD_U16)paramValue);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetSlewRateParam
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_SLEWRATE_PARAM param,
    OUT MCESD_U32 *paramValue
)
{
    MCESD_U16 data;

    switch (param)
    {
    case C12GP41P2V_SR_CTRL0:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWCTRL0, data);
        break;
    case C12GP41P2V_SR_CTRL1:
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SLEWCTRL1, data);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    *paramValue = (MCESD_U32)data;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetSquelchDetect
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL *squelched
)
{
    MCESD_U32 pinValue;

    MCESD_ATTEMPT(API_C12GP41P2V_HwGetPinCfg(devPtr, C12GP41P2V_PIN_SQ_DETECTED_LPF0, &pinValue));
    *squelched = (pinValue == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetSquelchThreshold
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_16 threshold
)
{
    if ((threshold < C12GP41P2V_SQ_THRESH_MIN) || (threshold > C12GP41P2V_SQ_THRESH_MAX))
        return MCESD_FAIL;

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SQ_THRESH_F_EN, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SQ_THRESH_EXT, threshold + 0x20);
    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetSquelchThreshold
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_16 *threshold
)
{
    MCESD_U16 value;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SQ_THRESH_EXT, value);
    *threshold = value - 0x20;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetDataPath
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_DATAPATH path
)
{
    E_C12GP41P2V_SERDES_SPEED speed;
    if (path != C12GP41P2V_PATH_FAR_END_LB)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_GetTxRxBitRate(devPtr, &speed));
        if ((speed == C12GP41P2V_SERDES_10G) || (speed == C12GP41P2V_SERDES_10P3125G) || (speed == C12GP41P2V_SERDES_12P375G))
        {
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_FBCK, 0x1);
        }
    }

    switch (path)
    {
    case C12GP41P2V_PATH_LOCAL_DIGITAL_LB:
        /* Enable C12GP41P2V_PATH_LOCAL_DIGITAL_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_RX2TX_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_TX2RX_EN, 1);
        /* Disable C12GP41P2V_PATH_LOCAL_ANALOG_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_SQ_DET_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB_DLY, 0);
        /* Disable C12GP41P2V_PATH_FAR_END_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CMN_FAREND_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_FAREND_EN, 0);
        /* Disable PhyTest */
        MCESD_ATTEMPT(API_C12GP41P2V_StopPhyTest(devPtr));
        break;
    case C12GP41P2V_PATH_EXTERNAL:
        /* Enable C12GP41P2V_PATH_EXTERNAL */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_RX2TX_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_TX2RX_EN, 0);
        /* Disable C12GP41P2V_PATH_LOCAL_ANALOG_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_SQ_DET_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB_DLY, 0);
        /* Disable C12GP41P2V_PATH_FAR_END_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CMN_FAREND_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_FAREND_EN, 0);
        break;
    case C12GP41P2V_PATH_FAR_END_LB:
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_G1_PLL_FBCK, 0x0);
        /* Enable C12GP41P2V_PATH_FAR_END_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_RX2TX_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_TX2RX_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CMN_FAREND_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_FAREND_EN, 1);
        /* Disable C12GP41P2V_PATH_LOCAL_ANALOG_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_SQ_DET_EN, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB_DLY, 0);
        /* Disable PhyTest */
        MCESD_ATTEMPT(API_C12GP41P2V_StopPhyTest(devPtr));
        break;
    case C12GP41P2V_PATH_LOCAL_ANALOG_LB:
        /* Enable C12GP41P2V_PATH_LOCAL_ANALOG_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_RX2TX_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_TX2RX_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_SQ_DET_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB_DLY, 1);
        /* Disable C12GP41P2V_PATH_FAR_END_LB */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CMN_FAREND_EN, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RX_FAREND_EN, 0);
        break;
    default:
        return MCESD_FAIL; /* Unsupported parameter */
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetDataPath
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_DATAPATH *path
)
{
    MCESD_U16 digRxToTxData, digTxToRxData, cmnFarendData, rxFarendData, dtlSqDetEnData, anaRxPuData, anaRxPuDlyData;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_RX2TX_EN, digRxToTxData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DIG_TX2RX_EN, digTxToRxData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CMN_FAREND_EN, cmnFarendData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RX_FAREND_EN, rxFarendData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_SQ_DET_EN, dtlSqDetEnData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB, anaRxPuData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ANA_PU_LB_DLY, anaRxPuDlyData);

    if ((digRxToTxData == 0) && (digTxToRxData == 0))
    {
        if ((0 == dtlSqDetEnData) && (1 == anaRxPuData) && (1 == anaRxPuDlyData))
            *path = C12GP41P2V_PATH_LOCAL_ANALOG_LB;
        else
            *path = C12GP41P2V_PATH_EXTERNAL;
    }
    else if ((digRxToTxData == 0) && (digTxToRxData == 1))
    {
        *path = C12GP41P2V_PATH_LOCAL_DIGITAL_LB;
    }
    else if ((digRxToTxData == 1) && (digTxToRxData == 0) && (cmnFarendData == 1) && (rxFarendData == 1))
    {
        *path = C12GP41P2V_PATH_FAR_END_LB;
    }
    else
    {
        *path = C12GP41P2V_PATH_UNKNOWN;
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTxRxPolarity
(
    IN MCESD_DEV_PTR devPtr,
    IN E_C12GP41P2V_POLARITY txPolarity,
    IN E_C12GP41P2V_POLARITY rxPolarity
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_TXD_INV, txPolarity);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RXD_INV, rxPolarity);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxRxPolarity
(
    IN MCESD_DEV_PTR devPtr,
    OUT E_C12GP41P2V_POLARITY *txPolarity,
    OUT E_C12GP41P2V_POLARITY *rxPolarity
)
{
    MCESD_U16 txdInvData, rxdInvData;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_TXD_INV, txdInvData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RXD_INV, rxdInvData);

    *txPolarity = (txdInvData == 0) ? C12GP41P2V_POLARITY_NORMAL : C12GP41P2V_POLARITY_INVERTED;
    *rxPolarity = (rxdInvData == 0) ? C12GP41P2V_POLARITY_NORMAL : C12GP41P2V_POLARITY_INVERTED;
    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_TxInjectError
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_U8 errors
)
{
    if ((errors < 1) || (errors > 8))
        return MCESD_FAIL;

    /* 0 = 1 error, 1 = 2 errors, ... 7 = 8 errors */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADD_ERR_NUM, errors - 1);

    /* Toggle F_C12GP41P2VR2P0_ADD_ERR_EN 0 -> 1 to trigger error injection */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADD_ERR_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADD_ERR_EN, 1);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetTxRxPattern
(
    IN MCESD_DEV_PTR devPtr,
    IN S_C12GP41P2V_PATTERN *txPattern,
    IN S_C12GP41P2V_PATTERN *rxPattern,
    IN E_C12GP41P2V_SATA_LONGSHORT sataLongShort,
    IN E_C12GP41P2V_SATA_INITIAL_DISPARITY sataInitialDisparity,
    IN const char *userPattern,
    IN MCESD_U8 userK
)
{
    if (txPattern->pattern == C12GP41P2V_PAT_USER)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_TX_PAT_SEL, (txPattern->enc8B10B == C12GP41P2V_ENC_8B10B_DISABLE) ? 1 : 2);
    }
    else
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_TX_PAT_SEL, txPattern->pattern);
    }

    if (rxPattern->pattern == C12GP41P2V_PAT_USER)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RX_PAT_SEL, (rxPattern->enc8B10B == C12GP41P2V_ENC_8B10B_DISABLE) ? 1 : 2);
    }
    else
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RX_PAT_SEL, rxPattern->pattern);
    }

    if (((txPattern->pattern >= C12GP41P2V_PAT_PRBS7) && (txPattern->pattern <= C12GP41P2V_PAT_PRBS32)) ||
        ((rxPattern->pattern >= C12GP41P2V_PAT_PRBS7) && (rxPattern->pattern <= C12GP41P2V_PAT_PRBS32)))
    {
        if ((txPattern->enc8B10B == C12GP41P2V_ENC_8B10B_ENABLE) || (rxPattern->enc8B10B == C12GP41P2V_ENC_8B10B_ENABLE))
        {
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PRBS_ENC, 1);
        }
        else
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PRBS_ENC, 0);
    }

    if ((sataLongShort == C12GP41P2V_SATA_LONG) || (sataLongShort == C12GP41P2V_SATA_SHORT))
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_SATA_LONG, sataLongShort);

    if ((sataInitialDisparity == C12GP41P2V_DISPARITY_NEGATIVE) || (sataInitialDisparity == C12GP41P2V_DISPARITY_POSITIVE))
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_START_RD, sataInitialDisparity);

    if (strlen(userPattern) > 0)
    {
        MCESD_U8 u8Pattern[10];

        MCESD_ATTEMPT(PatternStringToU8Array(userPattern, u8Pattern));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_PAT_79_64, MAKEU16FROMU8(u8Pattern[0], u8Pattern[1]));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_PAT_63_48, MAKEU16FROMU8(u8Pattern[2], u8Pattern[3]));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_PAT_47_32, MAKEU16FROMU8(u8Pattern[4], u8Pattern[5]));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_PAT_31_16, MAKEU16FROMU8(u8Pattern[6], u8Pattern[7]));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_PAT_15_0, MAKEU16FROMU8(u8Pattern[8], u8Pattern[9]));
    }

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_USER_K_CHAR, userK);

    if ((C12GP41P2V_PAT_JITTER_8T == txPattern->pattern) || (C12GP41P2V_PAT_JITTER_4T == txPattern->pattern))
    {
        MCESD_ATTEMPT(API_C12GP41P2V_SetDataBusWidth(devPtr, C12GP41P2V_DATABUS_32BIT));
    }
    else if ((C12GP41P2V_PAT_JITTER_10T == txPattern->pattern) || (C12GP41P2V_PAT_JITTER_5T == txPattern->pattern))
    {
        MCESD_ATTEMPT(API_C12GP41P2V_SetDataBusWidth(devPtr, C12GP41P2V_DATABUS_40BIT));
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetTxRxPattern
(
    IN MCESD_DEV_PTR devPtr,
    OUT S_C12GP41P2V_PATTERN *txPattern,
    OUT S_C12GP41P2V_PATTERN *rxPattern,
    OUT E_C12GP41P2V_SATA_LONGSHORT *sataLongShort,
    OUT E_C12GP41P2V_SATA_INITIAL_DISPARITY *sataInitialDisparity,
    OUT char *userPattern,
    OUT MCESD_U8 *userK
)
{
    MCESD_FIELD userPatternFieldArray[] = { F_C12GP41P2VR2P0_USER_PAT_79_64, F_C12GP41P2VR2P0_USER_PAT_63_48, F_C12GP41P2VR2P0_USER_PAT_47_32, F_C12GP41P2VR2P0_USER_PAT_31_16, F_C12GP41P2VR2P0_USER_PAT_15_0 };
    MCESD_32 userPatternFieldArrayCount = sizeof(userPatternFieldArray) / sizeof(MCESD_FIELD);
    MCESD_32 i;
    MCESD_U16 txPatternSelData, rxPatternSelData, prbsEncData, sataLongData, startRdData, userPatternData, userKData;
    MCESD_U8 u8Pattern[10];

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_TX_PAT_SEL, txPatternSelData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RX_PAT_SEL, rxPatternSelData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PRBS_ENC, prbsEncData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_SATA_LONG, sataLongData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_START_RD, startRdData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_USER_K_CHAR, userKData);

    if ((txPatternSelData == 1) || (txPatternSelData == 2))
    {
        txPattern->pattern = C12GP41P2V_PAT_USER;
        txPattern->enc8B10B = (txPatternSelData == 1) ? C12GP41P2V_ENC_8B10B_DISABLE : C12GP41P2V_ENC_8B10B_ENABLE;
    }
    else
    {
        txPattern->pattern = (E_C12GP41P2V_PATTERN)txPatternSelData;

        if (txPattern->pattern > C12GP41P2V_PAT_SATA_LTDP)
            txPattern->enc8B10B = C12GP41P2V_ENC_8B10B_ENABLE;
        else if ((txPattern->pattern >= C12GP41P2V_PAT_PRBS7) && (txPattern->pattern <= C12GP41P2V_PAT_PRBS32))
            txPattern->enc8B10B = (prbsEncData == 0) ? C12GP41P2V_ENC_8B10B_DISABLE : C12GP41P2V_ENC_8B10B_ENABLE;
        else
            txPattern->enc8B10B = C12GP41P2V_ENC_8B10B_DISABLE;
    }

    if ((rxPatternSelData == 1) || (rxPatternSelData == 2))
    {
        rxPattern->pattern = C12GP41P2V_PAT_USER;
        rxPattern->enc8B10B = (rxPatternSelData == 1) ? C12GP41P2V_ENC_8B10B_DISABLE : C12GP41P2V_ENC_8B10B_ENABLE;
    }
    else
    {
        rxPattern->pattern = (E_C12GP41P2V_PATTERN)rxPatternSelData;

        if (rxPattern->pattern > C12GP41P2V_PAT_SATA_LTDP)
            rxPattern->enc8B10B = C12GP41P2V_ENC_8B10B_ENABLE;
        else if ((rxPattern->pattern >= C12GP41P2V_PAT_PRBS7) && (rxPattern->pattern <= C12GP41P2V_PAT_PRBS32))
            rxPattern->enc8B10B = (prbsEncData == 0) ? C12GP41P2V_ENC_8B10B_DISABLE : C12GP41P2V_ENC_8B10B_ENABLE;
        else
            rxPattern->enc8B10B = C12GP41P2V_ENC_8B10B_DISABLE;
    }

    *sataLongShort = (E_C12GP41P2V_SATA_LONGSHORT)sataLongData;
    *sataInitialDisparity = (E_C12GP41P2V_SATA_INITIAL_DISPARITY)startRdData;

    for (i = 0; i < userPatternFieldArrayCount; i++)
    {
        C12GP41P2V_READ_FIELD(devPtr, EXTRACT_FIELD(userPatternFieldArray[i]), userPatternData);
        u8Pattern[i * 2 + 0] = (MCESD_U8)(userPatternData >> 8);
        u8Pattern[i * 2 + 1] = (MCESD_U8)(userPatternData & 0xFF);
    }

    MCESD_ATTEMPT(GenerateStringFromU8Array(u8Pattern, userPattern));

    *userK = (MCESD_U8)(userKData & 0xFF);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetComparatorStats
(
    IN MCESD_DEV_PTR devPtr,
    OUT S_C12GP41P2V_PATTERN_STATISTICS *statistics
)
{
    MCESD_U16 passData, lockData, errData_31_16, errData_15_0, data_47_32, data_31_16, data_15_0;
    E_C12GP41P2V_DATABUS_WIDTH width;
    MCESD_32 widthBit;
    MCESD_U64 frames;

    if (statistics == NULL)
        return MCESD_FAIL;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PASS, passData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_LOCK, lockData);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_47_32, data_47_32);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_31_16, data_31_16);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_15_0, data_15_0);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERR_CNT_31_16, errData_31_16);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERR_CNT_15_0, errData_15_0);
    MCESD_ATTEMPT(API_C12GP41P2V_GetDataBusWidth(devPtr, &width));

    frames = ((MCESD_U64)data_47_32 << 32) + ((MCESD_U64)data_31_16 << 16) + data_15_0;

    switch (width)
    {
    case C12GP41P2V_DATABUS_16BIT:
        widthBit = 16;
        break;
    case C12GP41P2V_DATABUS_20BIT:
        widthBit = 20;
        break;
    case C12GP41P2V_DATABUS_32BIT:
        widthBit = 32;
        break;
    case C12GP41P2V_DATABUS_40BIT:
        widthBit = 40;
        break;
    default:
        widthBit = 16;
        break;
    }

    statistics->totalBits = frames * widthBit;
    statistics->totalErrorBits = ((MCESD_U64)errData_31_16 << 16) + (MCESD_U64)errData_15_0;
    statistics->pass = (passData == 0) ? MCESD_FALSE : MCESD_TRUE;
    statistics->lock = (lockData == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_ResetComparatorStats
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_RST, 0);
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 1));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_RST, 1);
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 1));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_CNT_RST, 0);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_StartPhyTest
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PHYREADY_F, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_EN_MODE, 2);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_EN, 1);

    /* Reset PHY Test */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RST, 0);
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 1));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RST, 1);
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 1));
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_RST, 0);

    /* Wait 10 ms for CDR to lock... */
    MCESD_ATTEMPT(API_C12GP41P2V_Wait(devPtr, 10));

    /* ...before starting pattern checker */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PHYREADY_F, 1);
    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_StopPhyTest
(
    IN MCESD_DEV_PTR devPtr
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_PHYREADY_F, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PT_EN, 0);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMInit
(
    IN MCESD_DEV_PTR devPtr,
    OUT S_C12GP41P2V_EOM_SAVED *savedFields,
    OUT MCESD_16 *phaseOffset
)
{
    MCESD_U16 fieldData, i, eomOsStep, cur_phase;

    /* Enable Eye Monitor */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN, 1);

    /* Wait for EOM_READY */
    C12GP41P2V_POLL_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_READY, 1, 3000);

    /* Save Fields */
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_S, fieldData);
    savedFields->normUseS = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_D, fieldData);
    savedFields->normUseD = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_S, fieldData);
    savedFields->dfeF0SSM = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_D, fieldData);
    savedFields->dfeF0DSM = fieldData;

    /* Set Path */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_S, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_D, 0);

    /* Set DFE Samplers */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_SPLR_EN, 2);

    /* Set Sampler Loop Count for DFE */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_LPNUM, 0x3FF);

    /* Select EOM Clock and Phase Control Mode */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_D_EXT, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_D_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_S_EXT, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_S_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PH_CTRL_EXT, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PH_CTRL_FORCE, 1);

    /* Alignment Calibration */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_CDS_BYPASS, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_ALIGNSTART, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_ALIGNSTART, 0);
    C12GP41P2V_POLL_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_ALIGN_DONE, 1, 3000);

    /* UI Alignment */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_S_EXT, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_D_EXT, savedFields->dfeF0DSM);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 0);

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_OFFSET, fieldData);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_OFF_EXT, fieldData);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_FORCE, 1);

    /* Save Fields */
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SYNC_DIV_EN_F, fieldData);
    savedFields->syncDivEnF = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RESET_BYPASS, fieldData);
    savedFields->resetBypass = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_BYPASS, fieldData);
    savedFields->coarseBypass = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_PHASE_MOVE_DFE, fieldData);
    savedFields->phaseMoveDfe = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_EN, fieldData);
    savedFields->coarseDfeEn = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_F0B_ADAPT_EN, fieldData);
    savedFields->f0bAdaptEn = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CHECK_BYPASS, fieldData);
    savedFields->checkBypass = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_RESOL_ADJ_EN, fieldData);
    savedFields->resolAdjEn = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_ADJ, fieldData);
    savedFields->coarseDfeAdj = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_FINE_DFE_RESOL, fieldData);
    savedFields->fineDfeResol = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_DATA_EN, fieldData);
    savedFields->adaptDataEn = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_SLICEREN, fieldData);
    savedFields->adaptSliceren = fieldData;
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CDR_DFE_FORCE, fieldData);
    savedFields->cdrDfeForce = fieldData;

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SYNC_DIV_EN, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SYNC_DIV_EN_F, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SYNC_DIV_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RESET_BYPASS, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_BYPASS, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHASE_MOVE_DFE, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_F0B_ADAPT_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CHECK_BYPASS, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RESOL_ADJ_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_ADJ, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FINE_DFE_RESOL, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_DATA_EN, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_SLICEREN, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CDR_DFE_FORCE, 1);

    /* UI Shift Position Search */
    for (i = 0; i < C12GP41P2V_EOM_UI_MAX_LOOP; i++)
    {
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CDS_DONE_ISR, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SCHEME_START_F, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SCHEME_START, 1);
        C12GP41P2V_POLL_FIELD(devPtr, F_C12GP41P2VR2P0_CDS_DONE_ISR, 1, 3000);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SCHEME_START, 0);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CDS_DONE_ISR, 0);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_SAV_EYE_CHECK, fieldData);
        if (fieldData == 1)
        {
            MCESD_DBG_INFO("EOM UI alignment done, UI Position = %d\n", i);
            break;
        }
        else if (i == (C12GP41P2V_EOM_UI_MAX_LOOP - 1))
        {
            MCESD_DBG_INFO("EOM UI alignment Failed\n");
            return MCESD_FAIL;
        }

        /* EOM Phase UI Shift Logic */
        eomOsStep = 48;
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_OFFSET, cur_phase);
        while (eomOsStep > 0)
        {
            eomOsStep -= 1;
            cur_phase += 1;
            cur_phase = cur_phase % 32;
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_OFF_EXT, cur_phase);
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 1);
            C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 0);
        }
    }

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_OFFSET, fieldData);
    *phaseOffset = fieldData;

    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_CDS_BYPASS, 1);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMFinalize
(
    IN MCESD_DEV_PTR devPtr,
    IN S_C12GP41P2V_EOM_SAVED savedFields,
    IN MCESD_32 softwarePhase,
    IN MCESD_16 phaseOffset
)
{
    /* Restore Fields */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_SYNC_DIV_EN_F, savedFields.syncDivEnF);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RESET_BYPASS, savedFields.resetBypass);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_BYPASS, savedFields.coarseBypass);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PHASE_MOVE_DFE, savedFields.phaseMoveDfe);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_EN, savedFields.coarseDfeEn);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_F0B_ADAPT_EN, savedFields.f0bAdaptEn);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CHECK_BYPASS, savedFields.checkBypass);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_RESOL_ADJ_EN, savedFields.resolAdjEn);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_COARSE_DFE_ADJ, savedFields.coarseDfeAdj);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_FINE_DFE_RESOL, savedFields.fineDfeResol);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_DATA_EN, savedFields.adaptDataEn);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_ADAPT_SLICEREN, savedFields.adaptSliceren);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_CDR_DFE_FORCE, savedFields.cdrDfeForce);

    /* Restore Voltage */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_S_EXT, savedFields.dfeF0SSM);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 0);

    /* Restore Saved Fields*/
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_S, savedFields.normUseS);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_NORM_USE_D, savedFields.normUseD);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_CDS_BYPASS, 0);
    C12GP41P2V_WRITE_FIELD( devPtr, F_C12GP41P2VR2P0_SCHEME_START_F, 0 );

    /* Restore EOM Phase to 0 */
    MCESD_ATTEMPT(INT_C12GP41P2V_EOMSetPhase(devPtr, softwarePhase, 0, phaseOffset));

    /* Disable Phase Offset */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_FORCE, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_EXT, 0);

    /* Restore Phase Control Mode */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PH_CTRL_FORCE, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_PH_CTRL_EXT, 0);

    /* Select Data Clock for Slicer Sampler */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_D_FORCE, 0);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN_S_FORCE, 0);

    /* Fix a bug for PH_CTRL Logci for 16nmffc COMPHY_12G_PIPE4 */
    C12GP41P2V_WRITE_FIELD( devPtr, F_C12GP41P2VR2P0_EOM_EN_E_FORCE, 0);
    C12GP41P2V_WRITE_FIELD( devPtr, F_C12GP41P2VR2P0_PH_CTRL_EXT, 0 );
    C12GP41P2V_WRITE_FIELD( devPtr, F_C12GP41P2VR2P0_PH_CTRL_FORCE, 1 );

    /* Disable EOM Monitor */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_EN, 0);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMMeasPoint
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_32 phase,
    IN MCESD_U8 voltage,
    IN MCESD_U32 minSamples,
    IN MCESD_32 softwarePhase,
    IN MCESD_16 phaseOffset,
    OUT S_C12GP41P2V_EOM_DATA *measurement
)
{
    MCESD_U16 vldCntPData_15_0, vldCntPData_31_16, vldCntNData_15_0, vldCntNData_31_16;
    MCESD_U16 errCntPData_15_0, errCntPData_31_16, errCntNData_15_0, errCntNData_31_16;
    MCESD_U32 totalVldCntPData, totalVldCntNData;
    MCESD_U32 totalErrCntPData, totalErrCntNData;

    if (measurement == NULL)
        return MCESD_FAIL;

    /* Set phase */
    MCESD_ATTEMPT(INT_C12GP41P2V_EOMSetPhase(devPtr, softwarePhase, phase, phaseOffset));

    /* Set voltage */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_F0_S_EXT, voltage);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_FX_FORCE, 0);

    /* Clear Counters */
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_CNT_CLR, 1);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_CNT_CLR, 0);

    totalVldCntPData = 0;
    totalVldCntNData = 0;
    totalErrCntPData = 0;
    totalErrCntNData = 0;

    while ((totalVldCntPData < minSamples) || (totalVldCntNData < minSamples))
    {
        /* Call DFE to collect statistics */
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_START, 1);
        C12GP41P2V_POLL_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_DONE, 1, 3000);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_START, 0);

        /* Retrieve valid counts */
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_VLDCNT_P_15_0, vldCntPData_15_0);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_VLDCNT_P_31_16, vldCntPData_31_16);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_VLDCNT_N_15_0, vldCntNData_15_0);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_VLDCNT_N_31_16, vldCntNData_31_16);

        /* Retrieve error counts */
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERRCNT_P_15_0, errCntPData_15_0);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERRCNT_P_31_16, errCntPData_31_16);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERRCNT_N_15_0, errCntNData_15_0);
        C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_ERRCNT_N_31_16, errCntNData_31_16);

        totalVldCntPData += MAKEU32FROMU16(vldCntPData_31_16, vldCntPData_15_0);
        totalVldCntNData += MAKEU32FROMU16(vldCntNData_31_16, vldCntNData_15_0);
        totalErrCntPData += MAKEU32FROMU16(errCntPData_31_16, errCntPData_15_0);
        totalErrCntNData += MAKEU32FROMU16(errCntNData_31_16, errCntNData_15_0);
    }

    /* Update data structure */
    measurement->phase = phase;
    measurement->voltage = voltage;
    measurement->upperBitCount = totalVldCntPData;
    measurement->upperBitErrorCount = totalErrCntPData;
    measurement->lowerBitCount = totalVldCntNData;
    measurement->lowerBitErrorCount = totalErrCntNData;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMGetWidthHeight
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_U32 minSamples,
    IN MCESD_U32 berThreshold,
    OUT MCESD_U16* widthLeft,
    OUT MCESD_U16* widthRight,
    OUT MCESD_U16* heightUpper,
    OUT MCESD_U16* heightLower,
    OUT MCESD_U32* sampleCount
)
{
    MCESD_32 leftEdge, rightEdge, upperEdge, lowerEdge, maxPhase, minPhase, maxVoltage, phase, voltage, phaseMidpoint;
    MCESD_U32 upperBER, lowerBER;
    MCESD_U16 phaseStepCount, voltageStepCount;
    MCESD_32 softwarePhase = 0;
    S_C12GP41P2V_EOM_DATA measurement;
    S_C12GP41P2V_EOM_SAVED savedFields;
    MCESD_16 phaseOffset;

    memset(&measurement, 0x0, sizeof(S_C12GP41P2V_EOM_DATA));

    MCESD_ATTEMPT(API_C12GP41P2V_EOM1UIStepCount(devPtr, &phaseStepCount, &voltageStepCount));

    maxPhase = phaseStepCount / 2;
    minPhase = -phaseStepCount / 2;
    maxVoltage = voltageStepCount;

    /* Set default edge values */
    leftEdge = minPhase;
    rightEdge = maxPhase;
    upperEdge = -maxVoltage;
    lowerEdge = maxVoltage - 1;

    MCESD_ATTEMPT(API_C12GP41P2V_EOMInit(devPtr, &savedFields, &phaseOffset));

    /* Scan Left */
    for (phase = 0; phase < maxPhase; phase++)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, phase, 0, minSamples, softwarePhase, phaseOffset, &measurement));
        softwarePhase = phase;

        if (0 == phase)
        {
            *sampleCount = (MCESD_U32)measurement.upperBitCount;
        }

        /* Stop because no bits were read */
        if ((0 == measurement.upperBitCount) || (0 == measurement.lowerBitCount))
        {
            leftEdge = phase;
            break;
        }

        /* Stop because BER was too high */
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBER));
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBER));
        if ((berThreshold < upperBER) || (berThreshold < lowerBER))
        {
            leftEdge = phase;
            break;
        }
    }

    /* Scan Right */
    for (phase = -1; phase > minPhase; phase--)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, phase, 0, minSamples, softwarePhase, phaseOffset, &measurement));
        softwarePhase = phase;

        /* Stop because no bits were read */
        if ((0 == measurement.upperBitCount) || (0 == measurement.lowerBitCount))
        {
            rightEdge = phase;
            break;
        }

        /* Stop because BER was too high */
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBER));
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBER));
        if ((berThreshold < upperBER) || (berThreshold < lowerBER))
        {
            rightEdge = phase;
            break;
        }
    }

    /* Default if either edge did not update */
    if ((leftEdge == minPhase) || (rightEdge == maxPhase))
    {
        leftEdge = maxPhase;
        rightEdge = minPhase;
    }

    phaseMidpoint = (leftEdge - rightEdge) / 2 + rightEdge;

    /* Scan up and down */
    for (voltage = 0; voltage < maxVoltage; voltage++)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, phaseMidpoint, (MCESD_U8)voltage, minSamples, softwarePhase, phaseOffset, &measurement));
        softwarePhase = phaseMidpoint;

        /* Update once */
        while (upperEdge == -maxVoltage)
        {
            /* Update because no bits read */
            if (0 == measurement.upperBitCount)
            {
                upperEdge = voltage;
                break;
            }

            /* Update because BER was too high */
            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBER));
            if (berThreshold < upperBER)
            {
                upperEdge = voltage;
            }
            break;
        }

        /* Update once */
        while (lowerEdge == (maxVoltage - 1))
        {
            /* Update because no bits read */
            if (0 == measurement.lowerBitCount)
            {
                lowerEdge = -voltage;
                break;
            }

            /* Update because BER was too high */
            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBER));
            if (berThreshold < lowerBER)
            {
                lowerEdge = -voltage;
            }
            break;
        }

        /* Stop when both edges are found */
        if ((upperEdge != -maxVoltage) && (lowerEdge != (maxVoltage - 1)))
        {
            break;
        }
    }

    /* Default if either edge did not update */
    if ((upperEdge == -maxVoltage) || (lowerEdge == (maxVoltage - 1)))
    {
        upperEdge = maxVoltage - 1;
        lowerEdge = 1 - maxVoltage;
    }

    *widthLeft = (MCESD_16)((leftEdge == rightEdge) ? 0 : leftEdge);
    *widthRight = (MCESD_16)((leftEdge == rightEdge) ? 0 : -rightEdge);
    if (upperEdge == lowerEdge)
    {
        *heightUpper = 0;
        *heightLower = 0;
    }
    else
    {
        *heightUpper = (MCESD_U16)upperEdge;
        *heightLower = (MCESD_U16)((lowerEdge < 0) ? -lowerEdge : lowerEdge);
    }

    MCESD_ATTEMPT(API_C12GP41P2V_EOMFinalize(devPtr, savedFields, softwarePhase, phaseOffset));

    return MCESD_OK;
}

static MCESD_STATUS INT_C12GP41P2V_EOMSetPhase
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_32 softwarePhase,
    IN MCESD_32 targetPhase,
    IN MCESD_16 phaseOffset
)
{
    MCESD_U16 step, rawPhase;
    MCESD_16 phase, difference;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_EXT, rawPhase);

    phase = softwarePhase;

    if (phase == targetPhase)
        return MCESD_OK;
    else if (phase > targetPhase)
        step = -2;
    else
        step = 2;

    do
    {
        difference = phase - targetPhase;
        if (difference < 0)
            difference *= -1;

        if (difference <= 2)
            phase = (MCESD_16)targetPhase;
        else
            phase += step;

        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_EXT, ((MCESD_U16)(phase + phaseOffset) % 32));
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 1);
        C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_EOM_PH_VALID, 0);
    } while (phase != targetPhase);

    return MCESD_OK;
}

static MCESD_STATUS INT_C12GP41P2V_CalculateBER
(
    IN MCESD_U32 bitErrorCount,
    IN MCESD_U64 bitCount,
    OUT MCESD_U32* nanoBER
)
{
    MCESD_U64 adjustedBitErrorCount = (MCESD_U64)bitErrorCount * 0x3B9ACA00;   /* 0x3B9ACA00 == 1E+9 */
    *nanoBER = (MCESD_U32)(adjustedBitErrorCount / ((MCESD_U64)bitCount));
    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMConvertWidthHeight
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_U16 width,
    IN MCESD_U16 heightUpper,
    IN MCESD_U16 heightLower,
    OUT MCESD_U32* widthmUI,
    OUT MCESD_U32* heightmVUpper,
    OUT MCESD_U32* heightmVLower
)
{
    MCESD_U16 phaseStepCount, voltageStepCount, data;

    *widthmUI = 0;
    *heightmVUpper = 0;
    *heightmVLower = 0;

    if (0 == width)
        return MCESD_FAIL; /* Division by 0 Error */

    /* Convert width */
    MCESD_ATTEMPT(API_C12GP41P2V_EOM1UIStepCount(devPtr, &phaseStepCount, &voltageStepCount));
    *widthmUI = (MCESD_U32)width * 1000 / phaseStepCount;

    /* Convert height */
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DFE_RES_F0, data);
    *heightmVUpper = heightUpper * (data + 2);
    *heightmVLower = heightLower * (data + 2);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOM1UIStepCount
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_U16* phaseStepCount,
    OUT MCESD_U16* voltageStepCount
)
{
    E_C12GP41P2V_SERDES_SPEED speed;
    MCESD_U32 mbps;

    MCESD_ATTEMPT(API_C12GP41P2V_GetTxRxBitRate(devPtr, &speed));
    MCESD_ATTEMPT(INT_C12GP41P2V_SpeedGbpsToMbps(speed, &mbps));

    if (mbps >= 8000)       /* 8 Gbps <= speed */
    {
        *phaseStepCount = 128;
    }
    else if (mbps >= 4000)  /* 4 Gbps <= speed < 8 Gbps */
    {
        *phaseStepCount = 256;
    }
    else if (mbps >= 2000)  /* 2 Gbps <= speed < 4 Gbps */
    {
        *phaseStepCount = 512;
    }
    else                    /* 0 Gbps <= speed < 2 Gbps */
    {
        *phaseStepCount = 1024;
    }

    *voltageStepCount = 64;

    return MCESD_OK;
}

MCESD_STATUS INT_C12GP41P2V_SpeedGbpsToMbps
(
    IN E_C12GP41P2V_SERDES_SPEED speed,
    OUT MCESD_U32* mbps
)
{
    *mbps = 0;

    switch (speed)
    {
    case C12GP41P2V_SERDES_1P125G:          /* 1.125 Gbps */
        *mbps = 1125;
        break;
    case C12GP41P2V_SERDES_1P25G:           /* 1.25 Gbps */
        *mbps = 1250;
        break;
    case C12GP41P2V_SERDES_1P5G:            /* 1.5 Gbps */
        *mbps = 1500;
        break;
    case C12GP41P2V_SERDES_2P5G:            /* 2.5 Gbps */
        *mbps = 2500;
        break;
    case C12GP41P2V_SERDES_2P578125G:       /* 2.578125 Gbps */
        *mbps = 2578;
        break;
    case C12GP41P2V_SERDES_3G:              /* 3.0 Gbps */
        *mbps = 3000;
        break;
    case C12GP41P2V_SERDES_3P125G:          /* 3.125 Gbps */
        *mbps = 3125;
        break;
    case C12GP41P2V_SERDES_3P75G:           /* 3.75 Gbps */
        *mbps = 3750;
        break;
    case C12GP41P2V_SERDES_4G:              /* 4.0 Gbps */
        *mbps = 4000;
        break;
    case C12GP41P2V_SERDES_4P25G:           /* 4.25 Gbps */
        *mbps = 4250;
        break;
    case C12GP41P2V_SERDES_5G:              /* 5.0 Gbps */
        *mbps = 5000;
        break;
    case C12GP41P2V_SERDES_5P15625G:        /* 5.15625 Gbps */
        *mbps = 5156;
        break;
    case C12GP41P2V_SERDES_6G:              /* 6.0 Gbps */
        *mbps = 6000;
        break;
    case C12GP41P2V_SERDES_6P25G:           /* 6.25 Gbps */
        *mbps = 6250;
        break;
    case C12GP41P2V_SERDES_7P5G:            /* 7.5 Gbps */
        *mbps = 7500;
        break;
    case C12GP41P2V_SERDES_10G:             /* 10.0 Gbps */
        *mbps = 10000;
        break;
    case C12GP41P2V_SERDES_10P3125G:        /* 10.3125 Gbps */
        *mbps = 10312;
        break;
    case C12GP41P2V_SERDES_11P5625G:        /* 11.5625 Gbps */
        *mbps = 11562;
        break;
    case C12GP41P2V_SERDES_12P375G:         /* 12.375 Gbps */
        *mbps = 12375;
        break;
    case C12GP41P2V_SERDES_12P5G:           /* 12.5 Gbps */
        *mbps = 12500;
        break;
    default:
        return MCESD_FAIL;
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMGetEyeData
(
    IN MCESD_DEV_PTR devPtr,
CPSS_ADDITION_START
    IN MCESD_U32 phaseStepSize,
    IN MCESD_U32 voltageStepSize,
CPSS_ADDITION_END
    IN MCESD_U32 minSamples,
    IN MCESD_U32 berThreshold,
    INOUT S_C12GP41P2V_EYE_RAW_PTR eyeRawDataPtr
)
{
    S_C12GP41P2V_EOM_DATA measurement;
    MCESD_U32 leftEdgeIdx, rightEdgeIdx, upperEdgeIdx, lowerEdgeIdx, phaseCenterIdx, voltageCenterIdx, upperBer, lowerBer;
    MCESD_32 upperEdge, lowerEdge, leftMaxEdge, rightMaxEdge, upperMaxEdge, lowerMaxEdge, phase, voltage, upperVoltage, lowerVoltage, leftInnerEdge, rightInnerEdge;
    MCESD_U16 phaseStepCount, voltageStepCount;
    MCESD_32 softwarePhase = 0;
    MCESD_16 phaseOffset;
    S_C12GP41P2V_EOM_SAVED savedFields;

    memset(&measurement, 0x0, sizeof(S_C12GP41P2V_EOM_DATA));

    MCESD_ATTEMPT(API_C12GP41P2V_EOM1UIStepCount(devPtr, &phaseStepCount, &voltageStepCount));

    if (!eyeRawDataPtr)
    {
        MCESD_DBG_ERROR("API_C12GP41P2V_EOMGetEyeData: eyeRawDataPtr is NULL\n");
        return MCESD_FAIL;
    }

    eyeRawDataPtr->oneUIwidth = phaseStepCount;

    phaseCenterIdx = C12GP41P2V_EYE_MAX_PHASE_LEVEL / 2;
    voltageCenterIdx = voltageStepCount - 1;
    leftEdgeIdx = phaseCenterIdx - (phaseStepCount / 2);
    rightEdgeIdx = phaseCenterIdx + (phaseStepCount / 2) - 1;
    upperEdgeIdx = voltageCenterIdx - (voltageStepCount - 1);
    lowerEdgeIdx = voltageCenterIdx + (voltageStepCount - 1);

    leftMaxEdge = phaseStepCount / 2;
    rightMaxEdge = 1 - (phaseStepCount / 2);
    upperMaxEdge = voltageStepCount - 1;
    lowerMaxEdge = 1 - voltageStepCount;
    upperEdge = 0;
    lowerEdge = 0;

    MCESD_ATTEMPT(API_C12GP41P2V_EOMInit(devPtr, &savedFields, &phaseOffset));

    /* Check (0, 0) */
    MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, 0, 0, minSamples, softwarePhase, phaseOffset, &measurement));
    eyeRawDataPtr->sampleCount = (MCESD_U32)measurement.upperBitCount;

    if (0 == measurement.upperBitCount || 0 == measurement.lowerBitCount)
    {
        MCESD_ATTEMPT(API_C12GP41P2V_EOMFinalize(devPtr, savedFields, softwarePhase, phaseOffset));
        MCESD_DBG_ERROR("API_C12GP41P2V_EOMGetEyeData: Total Bit Count == 0 at (Phase: 0, Voltage: 0)\n");
        return MCESD_FAIL;
    }

    MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBer));
    MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBer));
    if ((berThreshold < upperBer) || (berThreshold < lowerBer))
    {
        MCESD_ATTEMPT(API_C12GP41P2V_EOMFinalize(devPtr, savedFields, softwarePhase, phaseOffset));
        MCESD_DBG_ERROR("API_C12GP41P2V_EOMGetEyeData: BER > berThreshold at (Phase: 0, Voltage: 0)\n");
        return MCESD_FAIL;
    }

    /* Left Sweep from Phase 0 with Voltage Sweep */
    leftInnerEdge = leftMaxEdge;
CPSS_ADDITION_START
    for (phase = 0; phase <= leftMaxEdge; phase += phaseStepSize)
CPSS_ADDITION_END
    {
        upperVoltage = lowerMaxEdge;
        lowerVoltage = upperMaxEdge;
CPSS_ADDITION_START
        for (voltage = 0; voltage <= upperMaxEdge; voltage += voltageStepSize)
CPSS_ADDITION_END
        {
            MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, phase, (MCESD_U8)voltage, minSamples, softwarePhase, phaseOffset, &measurement));
            softwarePhase = phase;

            eyeRawDataPtr->eyeRawData[phaseCenterIdx - phase][voltageCenterIdx + voltage] = measurement.lowerBitErrorCount;
            eyeRawDataPtr->eyeRawData[phaseCenterIdx - phase][voltageCenterIdx - voltage] = measurement.upperBitErrorCount;

            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBer));
            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBer));
            if ((berThreshold < upperBer) || (berThreshold < lowerBer))
            {
                if ((upperVoltage == lowerMaxEdge) && ((0 == measurement.upperBitCount) || (berThreshold < upperBer)))
                    upperVoltage = voltage; /* found upper edge */

                if ((lowerVoltage == upperMaxEdge) && ((0 == measurement.lowerBitCount) || (berThreshold < lowerBer)))
                    lowerVoltage = -voltage; /* found lower edge */
            }

            if ((phase < leftInnerEdge) && ((0 == upperVoltage) || (0 == lowerVoltage)))
                leftInnerEdge = phase;

            if (((upperVoltage != lowerMaxEdge) && (lowerVoltage != upperMaxEdge)))
                break;
        }

        if (upperVoltage > upperEdge)
            upperEdge = upperVoltage;

        if (lowerVoltage < lowerEdge)
            lowerEdge = lowerVoltage;

        /* Stop when (phase, 0) exceeds BER threshold */
        if ((upperVoltage == 0) && (lowerVoltage == 0))
        {
            leftEdgeIdx = phaseCenterIdx - phase;
            break;
        }
    }

    /* Right Sweep from Phase -1 with Voltage Sweep */
    rightInnerEdge = rightMaxEdge;
CPSS_ADDITION_START
    for (phase = -1; phase >= rightMaxEdge; phase -= phaseStepSize)
CPSS_ADDITION_END
    {
        upperVoltage = lowerMaxEdge;
        lowerVoltage = upperMaxEdge;
CPSS_ADDITION_START
        for (voltage = 0; voltage <= upperMaxEdge; voltage += voltageStepSize)
CPSS_ADDITION_END
        {
            MCESD_ATTEMPT(API_C12GP41P2V_EOMMeasPoint(devPtr, phase, (MCESD_U8)voltage, minSamples, softwarePhase, phaseOffset, &measurement));
            softwarePhase = phase;

            eyeRawDataPtr->eyeRawData[phaseCenterIdx - phase][voltageCenterIdx + voltage] = measurement.lowerBitErrorCount;
            eyeRawDataPtr->eyeRawData[phaseCenterIdx - phase][voltageCenterIdx - voltage] = measurement.upperBitErrorCount;

            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.upperBitErrorCount, measurement.upperBitCount, &upperBer));
            MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(measurement.lowerBitErrorCount, measurement.lowerBitCount, &lowerBer));
            if ((berThreshold < upperBer) || (berThreshold < lowerBer))
            {
                if ((upperVoltage == lowerMaxEdge) && ((0 == measurement.upperBitCount) || (berThreshold < upperBer)))
                    upperVoltage = voltage; /* found upper edge */

                if ((lowerVoltage == upperMaxEdge) && ((0 == measurement.lowerBitCount) || (berThreshold < lowerBer)))
                    lowerVoltage = -voltage; /* found lower edge */
            }

            if ((phase > rightInnerEdge) && ((0 == upperVoltage) || (0 == lowerVoltage)))
                rightInnerEdge = phase;

            if (((upperVoltage != lowerMaxEdge) && (lowerVoltage != upperMaxEdge)))
                break;
        }

        if (upperVoltage > upperEdge)
            upperEdge = upperVoltage;

        if (lowerVoltage < lowerEdge)
            lowerEdge = lowerVoltage;

        /* Stop when (phase, 0) exceeds BER threshold */
        if ((upperVoltage == 0) && (lowerVoltage == 0))
        {
            rightEdgeIdx = phaseCenterIdx - phase;
            break;
        }
    }

    eyeRawDataPtr->relativeCenter = phaseCenterIdx - ((leftInnerEdge - rightInnerEdge) / 2 + rightInnerEdge);
    upperEdgeIdx = voltageCenterIdx - upperEdge;
    lowerEdgeIdx = voltageCenterIdx - lowerEdge;

    MCESD_ATTEMPT(API_C12GP41P2V_EOMFinalize(devPtr, savedFields, softwarePhase, phaseOffset));

    eyeRawDataPtr->leftEdge = leftEdgeIdx;
    eyeRawDataPtr->rightEdge = rightEdgeIdx;
    eyeRawDataPtr->upperEdge = upperEdgeIdx;
    eyeRawDataPtr->lowerEdge = lowerEdgeIdx;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EOMPlotEyeData
(
    IN S_C12GP41P2V_EYE_RAW_PTR eyeRawDataPtr,
    IN MCESD_U32 phaseStepSize,
    IN MCESD_U32 voltageStepSize,
    IN MCESD_U32 berThreshold,
    IN MCESD_U32 berThresholdMax
)
{
    if (!eyeRawDataPtr)
    {
        MCESD_DBG_ERROR("API_C12GP41P2V_EOMPlotEyeData: eyeRawDataPtr is NULL\n");
        return MCESD_FAIL;
    }

    MCESD_ATTEMPT(plotEyeData(eyeRawDataPtr->eyeRawData[0], eyeRawDataPtr->leftEdge, eyeRawDataPtr->rightEdge, C12GP41P2V_EYE_MAX_PHASE_LEVEL / 2, phaseStepSize,
        eyeRawDataPtr->upperEdge, eyeRawDataPtr->lowerEdge, C12GP41P2V_EYE_MAX_VOLT_STEPS - 1, voltageStepSize, eyeRawDataPtr->sampleCount, (C12GP41P2V_EYE_MAX_VOLT_STEPS * 2) - 1,
        berThreshold, berThresholdMax, NULL, 1));

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_EyeDataDimensions
(
    IN S_C12GP41P2V_EYE_RAW_PTR eyeRawDataPtr,
    IN MCESD_U32 berThreshold,
    OUT MCESD_U32* width,
    OUT MCESD_U32* heightUpper,
    OUT MCESD_U32* heightLower
)
{
    MCESD_U32 upperBER, lowerBER, phaseIndex, phaseCenter, leftIndex, rightIndex, voltageCenter, upperIndex, lowerIndex;
    MCESD_32 voltageIndex;
    phaseCenter = C12GP41P2V_EYE_MAX_PHASE_LEVEL / 2;
    leftIndex = eyeRawDataPtr->leftEdge;
    rightIndex = eyeRawDataPtr->rightEdge;
    voltageCenter = C12GP41P2V_EYE_MAX_VOLT_STEPS - 1;
    upperIndex = eyeRawDataPtr->upperEdge;
    lowerIndex = eyeRawDataPtr->lowerEdge;

    /* Sweep from Center Phase to Left Edge */
    for (phaseIndex = phaseCenter; phaseIndex >= (MCESD_U32)eyeRawDataPtr->leftEdge; phaseIndex--)
    {
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageCenter], eyeRawDataPtr->sampleCount, &upperBER));
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageCenter + 1], eyeRawDataPtr->sampleCount, &lowerBER));
        if ((berThreshold < upperBER) || (berThreshold < lowerBER))
        {
            leftIndex = phaseIndex;
            break;
        }
    }

    /* Sweep from Center Phase to Right Edge */
    for (phaseIndex = phaseCenter; phaseIndex <= (MCESD_U32)eyeRawDataPtr->rightEdge; phaseIndex++)
    {
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageCenter], eyeRawDataPtr->sampleCount, &upperBER));
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageCenter + 1], eyeRawDataPtr->sampleCount, &lowerBER));
        if ((berThreshold < upperBER) || (berThreshold < lowerBER))
        {
            rightIndex = phaseIndex;
            break;
        }
    }

    phaseIndex = leftIndex + (rightIndex - leftIndex) / 2;

    /* Sweep from Center Voltage to Upper Edge */
    for (voltageIndex = voltageCenter; voltageIndex >= ((MCESD_32)eyeRawDataPtr->upperEdge); voltageIndex--)
    {
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageIndex], eyeRawDataPtr->sampleCount, &upperBER));
        if (berThreshold < upperBER)
        {
            upperIndex = voltageIndex;
            break;
        }
    }

    /* Sweep from Center Voltage to Lower Edge */
    for (voltageIndex = voltageCenter; voltageIndex <= ((MCESD_32)eyeRawDataPtr->lowerEdge); voltageIndex++)
    {
        MCESD_ATTEMPT(INT_C12GP41P2V_CalculateBER(eyeRawDataPtr->eyeRawData[phaseIndex][voltageIndex], eyeRawDataPtr->sampleCount, &lowerBER));
        if (berThreshold < lowerBER)
        {
            lowerIndex = voltageIndex;
            break;
        }
    }

    *width = rightIndex - leftIndex;
    *heightUpper = voltageCenter - upperIndex;
    *heightLower = lowerIndex - voltageCenter;

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetDRO
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_U16 *freq
)
{
    MCESD_U16 processValue5b, processCalSubss0, cntToProcessConst, processCalSs2tt0, processCalTt2ff0;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_VALUE_5B, processValue5b);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CAL_SUBSS0, processCalSubss0);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CNT_TO_CONST, cntToProcessConst);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CAL_SS2TT0, processCalSs2tt0);
    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_CAL_TT2FF0, processCalTt2ff0);
    if (processValue5b < 16)
    {
        *freq = processValue5b * processCalSubss0 + cntToProcessConst;
    }
    else if (processValue5b < 24)
    {
        *freq = 16 * processCalSubss0 + (processValue5b - 16) * processCalSs2tt0 + cntToProcessConst;
    }
    else
    {
        *freq = 16 * processCalSubss0 + 8 * processCalSs2tt0 + (processValue5b - 24) * processCalTt2ff0 + cntToProcessConst;
    }

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_SetCDRFreeze
(
    IN MCESD_DEV_PTR devPtr,
    IN MCESD_BOOL state
)
{
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_LOOP_FRZ, state);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_CLK_OFF, state);
    C12GP41P2V_WRITE_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_CLK_OFF_F, state);

    return MCESD_OK;
}

MCESD_STATUS API_C12GP41P2V_GetCDRFreeze
(
    IN MCESD_DEV_PTR devPtr,
    OUT MCESD_BOOL* state
)
{
    MCESD_U16 data;

    C12GP41P2V_READ_FIELD(devPtr, F_C12GP41P2VR2P0_DTL_LOOP_FRZ, data);
    *state = (data == 0) ? MCESD_FALSE : MCESD_TRUE;

    return MCESD_OK;
}

#endif /* C12GP41P2V_SIP6_30 */
